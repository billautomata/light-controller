(this["webpackJsonpcrosstown-trees"]=this["webpackJsonpcrosstown-trees"]||[]).push([[0],{222:function(e,t,n){},223:function(e,t,n){},262:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),c=n(9),s=n.n(c),r=(n(222),n(223),n(6)),o=n(118),l="COPY_PATTERN",d="CREATE_PATTERN",j="DELETE_PATTERN",u="DELETE_SONG",p="INITIALIZE_DATA",x="LOAD_PATTERN",g="PATTERN_CLEAR",b="PLAYLIST_ADD_STEP",m="PLAYLIST_CHANGE_STEP_ORDER",h="PLAYLIST_COPY_STEP",f="PLAYLIST_DELETE_STEP",O="PLAYLIST_SET_VALUE",y="SAVE_EDITS",v="SAVE_PATTERN",S="SAVE_SONG",E="SAVE_PLAYLIST",T="SET_BOOT_PLAYLIST",C="SET_CONFIG",_="SET_CURRENT_STEP",P="SET_EDIT_MODE",k="SET_NETWORK_DEVICE_PORT_MAPPING",w="SET_NETWORK_DEVICE_STATS",A="SET_NUMBER_OF_STEPS",R="SET_PATTERN_NAME",N="SET_PATTERNS",D="SET_PLAYLISTS",I="SET_START_ON_BOOT",L="SET_STEP",F="SET_STEP_TIME",M="SET_STEP_VALUE",B="SET_SONGS",V="SET_TIME_VALUE",U="SET_TIME_VALUE_TEMPORARY",z="SONG_ADD_STEP",W="SONG_CHANGE_STEP_ORDER",Y="SONG_COPY_STEP",G="SONG_DELETE_STEP",J="SONG_SET_VALUE",K="START_SEQUENCER",q="STOP_SEQUENCER",H="TEST_NETWORK_DEVICE",Q="MAP_PIN_TO_CHANNEL",Z={config:{},currentStep:10,dataLoaded:!1,uiState:{editModePattern:null,editModeSong:null,nSteps:-1,name:"",nameSong:"",confirmedTimeSteps:[],sectionPatternCollapsed:!1,sectionPlaylistCollapsed:!1,sectionSongCollapsed:!1},patterns:[],pins:[],songs:[],playlists:[]};var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return console.log("REDUCER - INITIALIZE_DATA",t.payload),Object.assign({},e,{config:t.payload.value.config,patterns:t.payload.value.patterns,songs:t.payload.value.songs,pins:t.payload.value.pins,playlists:t.payload.value.playlists,dataLoaded:!0,uiState:{editModePattern:!1,editModeSong:!1,editModePlaylist:!1,nSteps:t.payload.value.config.activePattern.patternLength,name:t.payload.value.config.activePattern.name,nameSong:t.payload.value.config.activeSong.name,confirmedTimeSteps:t.payload.value.config.activePattern.channels[0].steps.map((function(e){return{idx:e.idx}})),sectionPatternCollapsed:!0,sectionPlaylistCollapsed:!1,sectionSongCollapsed:!1}});case d:return console.log("REDUCER - CREATE_PATTERN"),window.socket.emit("PATTERN_CREATE",t.payload),e;case j:return console.log("REDUCER - DELETE_PATTERN"),window.socket.emit("PATTERN_DELETE",t.payload),e;case u:return console.log("REDUCER - DELETE_SONG"),window.socket.emit("SONG_DELETE",t.payload),e;case x:return console.log("REDUCER - LOAD_PATTERN",t.payload),window.socket.emit("CONFIG_LOAD_PATTERN",t.payload),e;case Q:return e;case g:return console.log("REDUCER = PATTERN_CLEAR"),window.socket.emit("PATTERN_CLEAR",t.payload),e;case b:return window.socket.emit("PLAYLIST_ADD_STEP",{}),e;case m:return console.log("REDUCER - PLAYLIST_CHANGE_STEP_ORDER",t.payload),window.socket.emit("PLAYLIST_CHANGE_STEP_ORDER",t.payload),e;case h:return console.log("REDUCER - PLAYLIST_COPY_STEP",t.payload),window.socket.emit("PLAYLIST_COPY_STEP",t.payload),e;case O:return console.log("REDUCER - PLAYLIST_SET_VALUE",t.paylaod),window.socket.emit("PLAYLIST_SET_VALUE",t.payload),e;case y:switch(console.log("REDUCER - SAVE_EDITS",t.payload),t.payload.mode){case"pattern":window.socket.emit("PATTERN_SET_STEPS",{value:e.uiState.nSteps}),window.socket.emit("PATTERN_SET_NAME",{value:e.uiState.name});break;case"song":window.socket.emit("SONG_SET_NAME",{value:e.uiState.nameSong});break;case"playlist":window.socket.emit("PLAYLIST_SET_NAME",{value:e.uiState.namePlaylist})}return e;case f:return console.log("REDUCER - PLAYLIST_DELETE_STEP",t.payload),window.socket.emit("PLAYLIST_DELETE_STEP",t.payload),e;case v:return console.log("REDUCER - SAVE_PATTERN",t.payload),console.log("emitting a save pattern"),window.socket.emit("PATTERN_SAVE",{value:!0}),e;case E:return console.log("REDUCER - SAVE_PLAYLIST",t.payload),console.log("emitting a save playlist"),window.socket.emit("PLAYLIST_SAVE",{value:!0}),e;case S:return console.log("REDUCER - SAVE_SONG",t.payload),console.log("emitting a save song"),window.socket.emit("SONG_SAVE",{value:!0}),e;case T:return window.socket.emit("SET_BOOT_PLAYLIST",t.payload),e;case C:return console.log("setting config in state",t.payload),e.uiState=Object.assign({},e.uiState,{name:t.payload.value.activePattern.name,nSteps:t.payload.value.activePattern.patternLength,confirmedTimeSteps:t.payload.value.activePattern.channels[0].steps.map((function(e){return{idx:e.idx}}))}),e.config=Object.assign({},t.payload.value,t.payload.value),console.log(t.payload.value),Object.assign({},e,{config:e.config,uiState:e.uiState});case l:return window.socket.emit("PATTERN_COPY",t.payload),e;case _:return console.log("setting current step",t.payload),window.socket.emit("SET_CURRENT_STEP",t.payload),e;case P:switch(console.log("setting edit mode"),t.payload.mode){case"pattern":return Object.assign({},e,{uiState:Object.assign({},e.uiState,{editModePattern:t.payload.value})});case"song":return Object.assign({},e,{uiState:Object.assign({},e.uiState,{editModeSong:t.payload.value})});case"playlist":return Object.assign({},e,{uiState:Object.assign({},e.uiState,{editModePlaylist:t.payload.value})})}var n=Object.assign({},e.uiState,{editModePattern:t.payload.value});return Object.assign({},e,{uiState:n});case k:return console.log("REDUCER - SET_NETWORK_DEVICE_PORT_MAPPING",t.payload),window.socket.emit("SET_NETWORK_DEVICE_PORT_MAPPING",t.payload),e;case w:return e.config.networkDevices=Object.assign([],e.config.networkDevices,t.payload.value),e.config=Object.assign({},e.config,e.config),Object.assign({},e,{config:e.config});case A:return console.log("setting number of steps",t.payload),e.uiState.nSteps=t.payload.value,Object.assign({},e,{uiState:e.uiState});case R:switch(console.log("REDUCER - SET_PATTERN_NAME"),t.payload.mode){case"pattern":return e.uiState.name=t.payload.value,Object.assign({},e,{uiState:e.uiState});case"song":return e.uiState.nameSong=t.payload.value,Object.assign({},e,{uiState:e.uiState});case"playlist":return e.uiState.namePlaylist=t.payload.value,Object.assign({},e,{uiState:e.uiState});default:return e}case N:return console.log("REDUCER - SET_PATTERNS",t.payload),e.patterns=Object.assign([],[],t.payload.value),console.log("patterns",e.patterns),Object.assign({},e,{patterns:e.patterns});case D:return console.log("REDUCER - SET_PLAYLISTS",t.payload),Object.assign({},e,{playlists:t.payload.value});case I:return window.socket.emit("SET_START_ON_BOOT",t.payload),e;case B:return console.log("REDUCER - SET_SONGS",t.payload),Object.assign({},e,{songs:t.payload.value});case L:return console.log("REDUCER - SET_STEP",t.payload),Object.assign({},e,{currentStep:t.payload.value});case F:return console.log("REDUCER - SET_STEP_TIME",t.payload),Object.assign({},e,{currentStepTime:t.payload.value});case M:return console.log("REDUCER - SET_STEP_VALUE",t.payload),window.socket.emit("PATTERN_SET_VALUE_STEP",t.payload),e;case U:return console.log("REDUCER - SET_TIME_VALUE_TEMPORARY",t.payload),e.uiState.confirmedTimeSteps=e.uiState.confirmedTimeSteps.filter((function(e){return e.idx!==t.payload.step})),e.uiState=Object.assign({},e.uiState,{uiState:e.uiState}),Object.assign({},e,e);case V:return 0===t.payload.value?e.uiState.confirmedTimeSteps=e.uiState.confirmedTimeSteps.filter((function(e){return e.idx!==t.payload.step})):e.uiState.confirmedTimeSteps.push({idx:t.payload.step}),e.uiState=Object.assign({},e.uiState,{uiState:e.uiState}),console.log("setting time value",t.payload),window.socket.emit("PATTERN_SET_VALUE_TIME",t.payload),Object.assign({},e,e);case z:return console.log("REDUCER - SONG_ADD_STEP"),window.socket.emit("SONG_ADD_STEP",t.payload),e;case W:return window.socket.emit("SONG_CHANGE_STEP_ORDER",t.payload),e;case Y:return window.socket.emit("SONG_COPY_STEP",t.payload),e;case G:return window.socket.emit("SONG_DELETE_STEP",t.payload),e;case J:return window.socket.emit("SONG_SET_VALUE",t.payload),e;case K:return console.log("REDUCER - START_SEQUENCER"),console.log(t.payload),window.socket.emit("START_SEQUENCER",t.payload),e;case q:return console.log("REDUCER - STOP_SEQUENCER"),window.socket.emit("STOP_SEQUENCER",t.paylaod),e;case H:return console.log("REDUCER - TEST_NETWORK_DEVICE"),window.socket.emit("TEST_NETWORK_DEVICE",t.payload),e;default:return e}},$=Object(o.a)(X),ee=n(298);function te(e){return{type:y,payload:e}}function ne(e){return{type:P,payload:e}}function ie(e){return{type:R,payload:e}}var ae=n(292),ce=n(297),se=n(52),re=n(0);var oe=Object(r.b)((function(e,t){return{currentStep:e.currentStep,patternLength:e.config.activePattern.patternLength,playingMode:e.config.playingMode}}),(function(e){return{setCurrentStep:function(t){e(function(e){return{type:_,payload:e}}(t))}}}))((function(e){var t=e.currentStep,n=e.patternLength,i=e.playingMode,a=e.setCurrentStep,c=1e3/n;return Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,alignItems:"center",justifyContent:"center",style:{marginTop:24,marginBottom:-5},children:[Object(re.jsx)(ae.a,{item:!0,xs:1}),Object(re.jsx)(ae.a,{item:!0,xs:11,children:Object(re.jsx)("svg",{viewBox:"-1 0 1001 15",style:{backgroundColor:"#FFF",width:"100%",height:"15px",margin:"auto"},children:new Array(n).fill(0).map((function(e,n){return Object(re.jsx)("g",{transform:"translate(".concat(c*n," 0)"),onClick:function(){console.log("click",n),a({value:n})},children:Object(re.jsx)("rect",{x:"1",y:"0",rx:"2",ry:"2",width:c-2,height:15,stroke:"#AAA",fill:"pattern"===i&&t===n?"#FFBF00":"#CCC"})},"stepIndicator_".concat(n))}))})})]})})),le=n(296),de=n(13);var je=Object(r.b)((function(e,t){return{pattern:e.config.activePattern,channels:e.config.activePattern.channels}}),(function(e){return{setStepValue:function(t){return e(function(e){return{type:M,payload:e}}(t))}}}))((function(e){var t=e.channels,n=e.pattern,a=e.setStepValue,c=1e3/n.patternLength,s=Math.min(24,c),r=Object(i.useRef)(null);return function(e){console.log("handler has run"),de.a().on("drag",(function(e){console.log("event",e)}))(de.e(e.current))}(r),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,children:t.slice(1,t.length).map((function(e,t){return Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,alignItems:"center",style:{outline:"1px solid white",marginBottom:0},children:[Object(re.jsx)(ae.a,{container:!0,item:!0,xs:1,justifyContent:"flex-end",children:Object(re.jsx)(ae.a,{item:!0,align:"center",xs:6,style:{height:22,backgroundColor:t%2?"#EEE":"#FFF"},children:Object(re.jsxs)(le.a,{variant:"body2",style:{fontWeight:700,fontSize:12,position:"relative",top:3},children:[0===t?"CH ":null,t]})})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:11,children:Object(re.jsx)("svg",{ref:r,viewBox:"-1 0 1001 ".concat(s),style:{width:"100%",backgroundColor:t%2?"#EEE":"#FFF"},children:new Array(n.patternLength).fill(0).map((function(n,i){var r=void 0!==e.steps.filter((function(e){return e.idx===i}))[0];return Object(re.jsx)("g",{transform:"translate(".concat(i*c," 0)"),children:Object(re.jsx)("rect",{x:"0",y:"-1",width:c,height:s+2,fill:r?"#1f77b4":"transparent",stroke:t%2?"#FFF":"#EEE",style:{cursor:"pointer"},onClick:function(){a({channel:t+1,step:i,value:!r})}})},"patternMode_sequenceValues_".concat(i,"_").concat(t))}))})})]},"patternMode_channelParent_".concat(t))}))})})),ue=n(299),pe=n(300);var xe=Object(r.b)((function(e,t){return{isPlaying:e.config.isPlaying&&e.config.playingMode===t.mode}}),(function(e){return{startSequencer:function(t){return e(function(e){return{type:K,payload:e}}(t))},stopSequencer:function(t){return e(function(e){return{type:q,payload:e}}(t))}}}))((function(e){return Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,spacing:1,justifyContent:"center",alignItems:"center",style:{fontSize:32,color:"#1f77b4"},children:[Object(re.jsx)(ae.a,{className:"transport-button",item:!0,style:{borderBottom:e.isPlaying?"4px solid #1f77b4":"4px solid transparent"},onClick:function(){e.startSequencer({mode:e.mode})},children:Object(re.jsx)("svg",{width:"18",height:"18",style:{border:"0px solid black"},children:Object(re.jsx)("polygon",{fill:"#1f77b4",points:"0 0 18 9 0 18"})})}),Object(re.jsx)(ae.a,{className:"transport-button",item:!0,style:{borderBottom:"4px solid transparent"},onClick:function(){e.stopSequencer()},children:Object(re.jsx)("svg",{width:"18",height:"18",style:{border:"0px solid black"},children:Object(re.jsx)("polygon",{fill:"#1f77b4",points:"0 0 18 0 18 18 0 18"})})})]})}));var ge=Object(r.b)((function(e,t){var n=e.patterns.findIndex((function(t){return t.id===e.config.activePatternId}));return{numberOfChannels:e.config.activePattern.channels.length-1,numberOfSteps:e.config.activePattern.patternLength,patternName:e.config.activePattern.name,editMode:e.uiState.editModePattern,showSave:JSON.stringify(e.config.activePattern)!==JSON.stringify(e.patterns[n])}}),(function(e){return{patternClear:function(t){return e(function(e){return{type:g,payload:e}}(t))},saveEdits:function(t){return e(te(t))},savePattern:function(t){return e(function(e){return{type:v,payload:e}}(t))},setEditMode:function(t){return e(ne(t))},setNumberOfSteps:function(t){return e(function(e){return{type:A,payload:e}}(t))},setPatternName:function(t){return e(ie(t))}}}))((function(e){var t=e.editMode,n=(e.numberOfChannels,e.numberOfSteps),i=e.patternName,a=e.saveEdits,c=e.savePattern,s=e.setEditMode,r=e.showSave,o=e.setNumberOfSteps,l=e.setPatternName,d=n,j=i;return Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,alignItems:"center",children:[Object(re.jsx)(ae.a,{container:!0,item:!0,xs:1,alignItems:"center",justifyContent:"center",align:"center",children:Object(re.jsx)(ae.a,{item:!0,xs:12,children:Object(re.jsx)(le.a,{variant:"body2",children:"Name"})})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:6,alignItems:"center",children:t?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(ue.a,{defaultValue:j,size:"medium",onChange:function(e){j=e.target.value,l({mode:"pattern",value:e.target.value})}})}),Object(re.jsx)(ae.a,{item:!0,xs:2,children:Object(re.jsx)(ue.a,{variant:"outlined",size:"small",type:"text",label:"Steps",defaultValue:n,onChange:function(e){console.log("on change steps",e.target.value),d=e.target.value,o({value:d})},onKeyPress:function(e){console.log(e.key),"Enter"===e.key&&o({value:d})}})}),Object(re.jsxs)(ae.a,{item:!0,xs:3,align:"right",children:[Object(re.jsx)(pe.a,{variant:"contained",color:"primary",size:"small",onClick:function(){a({mode:"pattern"}),s({mode:"pattern",value:!1})},children:"Done"}),Object(re.jsx)(pe.a,{variant:"text",color:"default",size:"small",onClick:function(){console.log("set edit mdoe click"),s({mode:"pattern",value:!1})},children:"\u2715"})]})]}):Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,xs:5,children:Object(re.jsx)(le.a,{variant:"h6",children:i})}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:2,align:"center",children:[Object(re.jsx)(ae.a,{item:!0,xs:12,children:Object(re.jsx)(le.a,{variant:"body2",children:"Steps"})}),Object(re.jsx)(ae.a,{item:!0,xs:12,children:Object(re.jsx)(le.a,{variant:"body1",children:n})})]}),Object(re.jsx)(ae.a,{item:!0,xs:1,children:Object(re.jsx)(pe.a,{variant:"outlined",color:"default",size:"small",onClick:function(){console.log("set edit mdoe click"),s({mode:"pattern",value:!0})},children:"Edit"})})]})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:2,justifyContent:"center",children:Object(re.jsx)(xe,{mode:"pattern"})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:3,justifyContent:"flex-end",spacing:1,children:t?Object(re.jsx)(re.Fragment,{}):Object(re.jsx)(re.Fragment,{children:r?Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)(pe.a,{variant:"outlined",color:"primary",size:"medium",style:{marginRight:16},onClick:function(){console.log("saving pattern"),c({})},children:"Save"})}):Object(re.jsx)(re.Fragment,{})})})]})}));var be=Object(r.b)((function(e,t){return{patternLength:e.config.activePattern.patternLength,timePattern:e.config.activePattern.channels[0],activePatternId:e.config.activePatternId,confirmedTimeSteps:e.uiState.confirmedTimeSteps}}),(function(e){return{setTimeValue:function(t){return e(function(e){return{type:V,payload:e}}(t))},setTimeValueTemporary:function(t){return e(function(e){return{type:U,payload:e}}(t))}}}))((function(e){var t=e.activePatternId,n=e.confirmedTimeSteps,i=e.timePattern,a=e.setTimeValue,c=(e.setTimeValueTemporary,e.patternLength),s=1e3/c,r=Math.min(24,s);return Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,style:{marginBottom:-3},alignItems:"center",children:[Object(re.jsx)(ae.a,{container:!0,item:!0,xs:1,align:"center",justifyContent:"flex-end",children:Object(re.jsx)(ae.a,{item:!0,xs:6,style:{height:20,backgroundColor:"#EEE",borderTopLeftRadius:"6px"},children:Object(re.jsx)(le.a,{variant:"body2",style:{fontStyle:"italic",fontWeight:700,position:"relative",top:1},children:"ms"})})}),Object(re.jsx)(ae.a,{item:!0,xs:11,children:Object(re.jsx)("svg",{viewBox:"-1 0 1001 25",style:{backgroundColor:"#FFF",width:"100%",marginTop:2},children:new Array(c).fill(0).map((function(e,c){var o=i.steps.filter((function(e){return e.idx===c}))[0],l=n.findIndex((function(e){return e.idx===c}));return Object(re.jsxs)("g",{transform:"translate(".concat(s*c," 0)"),children:[Object(re.jsx)("rect",{x:"1",y:"1",height:r-1,width:s-2,fill:"#EEE",stroke:"#AAA",onClick:function(){a({step:c,value:Number(500)})}}),void 0===o?Object(re.jsx)(re.Fragment,{}):Object(re.jsx)(re.Fragment,{children:Object(re.jsx)("foreignObject",{width:s,height:r,children:Object(re.jsx)("input",{type:"text",defaultValue:o.value,style:{backgroundColor:-1===l?"white":"#1f77b4",color:-1===l?"black":"white",fontWeight:-1===l?"500":"700",border:"1px solid #DDD",height:r-5,width:s-7,marginTop:1,outline:"none",fontSize:12,textAlign:"center"},onChange:function(e){console.log("onchange",e.target.value)},onKeyDown:function(e){console.log("onkeydown",e.key,e.target.value),"Enter"!==e.key&&"Tab"!==e.key||a({step:c,value:Number(e.target.value)})}})})})]},"pattern_".concat(t,"_speedvalue_").concat(c,"_").concat(Math.random()))}))})})]})})),me=n(14);var he=Object(r.b)((function(e,t){return{props:t,activePatternId:"song"===t.mode?e.config.activeSongId:"playlist"===t.mode?e.config.activePlaylistId:e.config.activePatternId,patterns:"song"===t.mode?e.songs:"playlist"===t.mode?e.playlists:e.patterns}}),(function(e){return{copyPattern:function(t){e(function(e){return{type:l,payload:e}}(t))},createPattern:function(t){e(function(e){return{type:d,payload:e}}(t))},deletePattern:function(t){e(function(e){return{type:j,payload:e}}(t))},loadPattern:function(t){e(function(e){return{type:x,payload:e}}(t))}}}))((function(e){var t=e.activePatternId,n=(e.copyPattern,e.createPattern),a=e.deletePattern,c=e.loadPattern,s=e.patterns,r=e.props,o=Object(i.useState)([]),l=Object(me.a)(o,2),d=l[0],j=l[1];return Object(re.jsx)(ae.a,{container:!0,item:!0,spacing:0,alignItems:"flex-start",justifyContent:"center",style:{borderLeft:"0px solid #EEE",height:"100%"},children:Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,alignItems:"flex-start",justifyContent:"center",style:{border:"0px solid #EEE"},children:[Object(re.jsx)(ae.a,{xs:12,container:!0,item:!0,alignItems:"flex-start",align:"center",justifyContent:"flex-start",style:{outline:"0px solid red",paddingTop:"4px",paddingBottom:"18.5px"},children:Object(re.jsx)(ae.a,{item:!0,xs:10,children:Object(re.jsxs)(pe.a,{size:"large",variant:"outlined",color:"primary",onClick:function(){n({mode:r.mode})},children:["NEW ","song"===r.mode?"Song":"playlist"===r.mode?"Playlist":"Pattern"]})})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,style:{maxHeight:"410px",overflow:"hidden",overflowY:"auto"},children:s.map((function(e,n){return Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,sm:12,alignItems:"center",justifyContent:"center",style:{paddingBottom:0,marginBottom:1},children:-1===d.indexOf(n)?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,xs:10,onClick:function(){c({id:e.id,mode:r.mode})},children:Object(re.jsx)(pe.a,{size:"small",variant:t===e.id?"contained":"outlined",color:t===e.id?"primary":"default",style:{width:"100%",whiteSpace:"nowrap"},children:e.name})}),Object(re.jsx)(ae.a,{item:!0,xs:2,align:"left",onClick:function(e){e.stopPropagation();var t=d;t.push(n),j(Object.assign([],d,t))},children:Object(re.jsx)(pe.a,{size:"small",variant:"text",style:{width:"100%",minWidth:0},children:"\u2715"})})]}):Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,xs:4,align:"center",style:{padding:"8px 0px"},children:"Sure?"}),Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(pe.a,{variant:"contained",size:"small",onClick:function(){var t=d.filter((function(e){return e!==n}));j(Object.assign([],[],t)),a({id:e.id,mode:r.mode})},children:"Yes"})}),Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(pe.a,{size:"small",onClick:function(e){e.stopPropagation();var t=d.filter((function(e){return e!==n}));j(Object.assign([],[],t))},children:"No"})})]})},"pattern-list-item-"+e.id)}))})]})})}));var fe=Object(r.b)((function(e,t){return{props:t}}),(function(e){return{}}))((function(e){var t=e.props;return Object(re.jsx)("div",{style:{position:"relative"},children:Object(re.jsx)("div",{style:{backgroundColor:"#EEE",border:"1px solid #CCC",borderRadius:0,color:"#333",fontWeight:700,left:-10,padding:"4px 12px",position:"absolute",top:-37},children:Object(re.jsx)(le.a,{variant:"body2",style:{fontWeight:700,letterSpacing:"0.5px"},children:t.title})})})}));var Oe=Object(r.b)((function(e,t){return{}}),(function(e){return{}}))((function(e){return Object(se.a)(e),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,children:[Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:10,children:[Object(re.jsx)(ge,{}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,style:{paddingRight:24},children:[Object(re.jsx)(oe,{}),Object(re.jsx)(be,{}),Object(re.jsx)(je,{})]})]}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:2,children:Object(re.jsx)(he,{mode:"pattern"})})]})}));var ye=Object(r.b)((function(e,t){var n=e.songs.findIndex((function(t){return t.id===e.config.activeSongId}));return{name:e.config.activeSong.name,editMode:e.uiState.editModeSong,showSave:JSON.stringify(e.config.activeSong)!==JSON.stringify(e.songs[n])}}),(function(e){return{saveEdits:function(t){return e(te(t))},saveSong:function(t){return e(function(e){return{type:S,payload:e}}(t))},setEditMode:function(t){return e(ne(t))},setPatternName:function(t){return e(ie(t))}}}))((function(e){var t=e.editMode,n=e.name,i=e.saveEdits,a=e.saveSong,c=e.setEditMode,s=e.setPatternName,r=e.showSave;return Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,alignItems:"center",children:[Object(re.jsx)(ae.a,{item:!0,xs:1,align:"center",children:Object(re.jsx)(le.a,{variant:"body2",children:"Name"})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:6,children:t?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(ue.a,{defaultValue:n,onChange:function(e){s({mode:"song",value:e.target.value})}})}),Object(re.jsx)(ae.a,{item:!0,xs:2}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:3,justifyContent:"center",align:"right",children:[Object(re.jsx)(pe.a,{variant:"contained",color:"primary",size:"small",onClick:function(){i({mode:"song"}),c({mode:"song",value:!1})},children:"Done"}),Object(re.jsx)(pe.a,{size:"small",onClick:function(){c({mode:"song",value:!1})},children:"\u2715"})]})]}):Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,xs:7,children:Object(re.jsx)(le.a,{variant:"h6",children:n})}),Object(re.jsx)(ae.a,{item:!0,xs:1,children:Object(re.jsx)(pe.a,{variant:"outlined",size:"small",onClick:function(){c({mode:"song",value:!0})},children:"Edit"})})]})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:2,justifyContent:"center",children:Object(re.jsx)(xe,{mode:"song"})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:3,justifyContent:"flex-end",spacing:1,children:Object(re.jsx)(ae.a,{item:!0,style:{display:r?null:"none"},children:Object(re.jsx)(pe.a,{variant:"outlined",color:"primary",size:"medium",style:{marginRight:16},onClick:function(){a()},children:"Save"})})})]})}));var ve=Object(r.b)((function(e,t){return{currentStepTime:e.currentStepTime,songPattern:"playlist"===t.mode?e.config.playlistData.songs:e.config.songData.patterns,doIndicator:t.mode===e.config.playingMode}}),(function(e){return{}}))((function(e){var t=e.currentStepTime,n=e.doIndicator,i=e.songPattern,a=de.c(de.d),c=de.f(i,(function(e){return e.msLength})),s=de.b().domain([0,c]).range([0,960]),r=de.b().domain([0,1]).range([0,960]),o=[];return i.forEach((function(e){-1===o.indexOf(e.id)&&o.push(e.id)})),o=o.sort(),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,children:Object(re.jsxs)("svg",{width:"90%",height:"45px",viewBox:"0 0 ".concat(960," 45"),style:{margin:"auto",backgroundColor:"white",opacity:0===i.length?0:null},children:[i.map((function(e,t){var n=s(de.f(i.filter((function(e,n){return n<t})),(function(e){return e.msLength}))),c=s(e.msLength);return Object(re.jsx)("rect",{x:n,y:"0",width:c,height:"35",fill:a(o.indexOf(e.id)),stroke:"white"},"visualized_songpattern_".concat(t))})),Object(re.jsxs)("g",{transform:"translate(".concat(t?r(t):0," 0)"),style:{display:n?null:"none"},children:[Object(re.jsx)("line",{x1:"0",y1:"0",x2:"0",y2:"35",stroke:"black",strokeWidth:"4px"}),Object(re.jsx)("g",{transform:"translate(0 35)",children:Object(re.jsx)("polygon",{points:"0 0 5 10 -5 10",fill:"black"})})]})]})})}));var Se=Object(r.b)((function(e,t){return{patterns:e.patterns,song:e.config.activeSong,songPattern:e.config.songData}}),(function(e){return{songAddStep:function(t){e(function(e){return{type:z,payload:e}}(t))},songChangeStepOrder:function(t){e(function(e){return{type:W,payload:e}}(t))},songCopyStep:function(t){e(function(e){return{type:Y,payload:e}}(t))},songDeleteStep:function(t){e(function(e){return{type:G,payload:e}}(t))},songSetValue:function(t){e(function(e){return{type:J,payload:e}}(t))}}}))((function(e){var t=e.patterns,n=e.song,a=e.songAddStep,c=e.songChangeStepOrder,s=e.songCopyStep,r=e.songDeleteStep,o=e.songPattern,l=e.songSetValue,d=(n.steps,Object(i.useState)([])),j=Object(me.a)(d,2),u=j[0],p=j[1],x=[];o.patterns.forEach((function(e){-1===x.indexOf(e.id)&&x.push(e.id)})),x=x.sort();var g=de.c(de.d);return Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,children:[Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:10,children:[Object(re.jsx)(ye,{}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,style:{margin:"24px 0px 18px 0px"},children:Object(re.jsx)(ve,{mode:"song"})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,justifyContent:"center",children:Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,sm:12,md:10,justifyContent:"space-around",style:{marginTop:8},children:[Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,style:{fontSize:12,fontWeight:800,textTransform:"uppercase",marginBottom:2,padding:8},children:Object(re.jsxs)(ae.a,{container:!0,item:!0,align:"center",style:{display:0===n.steps.length?"none":null},children:[Object(re.jsx)(ae.a,{item:!0,xs:1,children:"\xa0"}),Object(re.jsx)(ae.a,{item:!0,xs:10,md:5,align:"left",children:"Pattern Name"}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:3,md:4,lg:6,children:[Object(re.jsx)(ae.a,{item:!0,xs:3,children:"Repeat"}),Object(re.jsx)(ae.a,{item:!0,xs:3,children:"Speed"})]})]})}),0===n.steps.length?Object(re.jsx)(re.Fragment,{}):n.steps.map((function(e,i){var a=t.filter((function(t){return t.id===e.id}))[0];return Object(re.jsx)(ae.a,{item:!0,xs:12,style:{borderRadius:"4px",border:"1px solid #DDD",marginBottom:4,padding:8},children:Object(re.jsxs)(ae.a,{container:!0,align:"center",alignItems:"center",children:[Object(re.jsx)(ae.a,{item:!0,xs:1,align:"left",style:{paddingTop:"4px",paddingLeft:"8px",cursor:"pointer"},onClick:function(){r({idx:i})},children:Object(re.jsxs)("svg",{viewBox:"0 0 18 18",width:"12",height:"12",children:[Object(re.jsx)("line",{x1:"17",y1:"1",x2:"1",y2:"17",stroke:"#1f77b4",strokeWidth:"4"}),Object(re.jsx)("line",{x1:"1",y1:"1",x2:"17",y2:"17",stroke:"#1f77b4",strokeWidth:"4"})]})}),Object(re.jsx)(ae.a,{item:!0,xs:10,md:5,align:"left",children:-1===u.indexOf(i)?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("div",{style:{display:"inline-block",position:"relative",marginLeft:-16,top:3,left:-17,width:16,height:16,backgroundColor:g(x.findIndex((function(t){return t===e.id}))),borderRadius:"50%"}}),Object(re.jsx)("span",{children:Object(re.jsx)(le.a,{variant:"body1",style:{display:"inline-block"},children:a.name})})]}):Object(re.jsx)(re.Fragment,{children:Object(re.jsx)("select",{style:{width:"100%"},onChange:function(e){console.log(e.target.value),l({idx:i,type:"pattern",value:e.target.value})},children:t.map((function(e){var t=a.id===e.id;return console.log(t,a.id,e.id),Object(re.jsx)("option",{value:e.id,selected:t,children:e.name})}))})})}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:3,md:3,lg:3,alignItems:"center",justifyContent:"space-around",children:[Object(re.jsx)(ae.a,{item:!0,xs:6,align:"center",children:-1===u.indexOf(i)?Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)(le.a,{variant:"body2",children:[e.repeat,"x"]})}):Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,justifyContent:"center",alignItems:"center",children:[Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)(ue.a,{size:"small",defaultValue:e.repeat,style:{width:"32px",textAlign:"center"},onChange:function(e){console.log(e.target.value),l({idx:i,type:"repeat",value:e.target.value})}})}),Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)("span",{children:"x"})})]})}),Object(re.jsx)(ae.a,{item:!0,xs:6,children:-1===u.indexOf(i)?Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)(le.a,{variant:"body2",children:[e.speed,"x"]})}):Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,justifyContent:"center",alignItems:"center",spacing:1,children:[Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)("select",{style:{width:40},onChange:function(e){console.log(e.target.value),l({idx:i,type:"speed",value:e.target.value})},children:[.25,.5,1,1.5,2,4,8].map((function(t,n){return Object(re.jsx)("option",{value:t,selected:Number(e.speed)===t,children:t},"speed_option_".concat(i,"_").concat(n))}))})}),Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)("span",{children:"x"})})]})})]}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:2,md:3,lg:3,justifyContent:"flex-end",style:{paddingTop:"4px"},spacing:1,children:-1===u.indexOf(i)?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,onClick:function(){c({idx:i,direction:"up"})},style:{cursor:0===i?null:"pointer"},children:Object(re.jsx)("svg",{width:"18",height:"18",style:{opacity:0===i?0:1},children:Object(re.jsx)("polygon",{points:"9 0 18 18 0 18",fill:"#1f77b4"})})}),Object(re.jsx)(ae.a,{item:!0,onClick:function(){c({idx:i,direction:"down"})},style:{cursor:"pointer"},children:Object(re.jsx)("svg",{width:"18",height:"18",style:{opacity:i===n.steps.length-1?0:1},children:Object(re.jsx)("polygon",{transform:"rotate(180 9,9)",points:"9 0 18 18 0 18",fill:"#1f77b4"})})}),Object(re.jsx)(ae.a,{item:!0,align:"right",style:{cursor:"pointer"},onClick:function(){s({idx:i})},children:Object(re.jsxs)("svg",{width:"18",height:"18",children:[Object(re.jsx)("line",{x1:"1",y1:"9",x2:"17",y2:"9",stroke:"#1f77b4",strokeWidth:"4"}),Object(re.jsx)("line",{x1:"9",y1:"1",x2:"9",y2:"17",stroke:"#1f77b4",strokeWidth:"4"})]})}),Object(re.jsx)(ae.a,{item:!0,align:"right",style:{cursor:"pointer"},onClick:function(){var e=u;e.push(i),p(Object.assign([],[],e))},children:Object(re.jsxs)("svg",{width:"18",height:"18",children:[Object(re.jsx)("rect",{x:"2",y:"2",width:"14",height:"14",fill:"none",stroke:"#1f77b4",strokeWidth:"4"}),Object(re.jsx)("line",{x1:"19",y1:"0",x2:"9",y2:"9",stroke:"white",strokeWidth:"7"}),Object(re.jsx)("line",{x1:"16",y1:"2.5",x2:"7",y2:"11",stroke:"#1f77b4",strokeWidth:"4",strokeLinecap:"round"})]})})]}):Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)(pe.a,{size:"small",variant:"contained",color:"primary",onClick:function(){var e=u.filter((function(e){return e!==i}));p(Object.assign([],[],e))},children:"Done"})}),Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)(pe.a,{size:"small",onClick:function(){var e=u.filter((function(e){return e!==i}));p(Object.assign([],[],e))},children:"\u2715"})})]})})]})},"songMode_steps_".concat(i))})),Object(re.jsx)(ae.a,{item:!0,xs:12,align:"center",children:Object(re.jsx)(pe.a,{size:"large",onClick:function(){a()},children:"ADD PATTERN"})})]})})]}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:2,children:Object(re.jsx)(he,{mode:"song"})})]})}));var Ee=Object(r.b)((function(e,t){var n=e.playlists.findIndex((function(t){return t.id===e.config.activePlaylistId}));return{name:e.config.activePlaylist.name,editMode:e.uiState.editModePlaylist,showSave:JSON.stringify(e.config.activePlaylist)!==JSON.stringify(e.playlists[n])}}),(function(e){return{saveEdits:function(t){return e(te(t))},savePlaylist:function(t){return e(function(e){return{type:E,payload:e}}(t))},setEditMode:function(t){return e(ne(t))},setPatternName:function(t){return e(ie(t))}}}))((function(e){var t=e.editMode,n=e.name,i=e.saveEdits,a=e.savePlaylist,c=e.setEditMode,s=e.setPatternName,r=e.showSave;return Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,alignItems:"center",children:[Object(re.jsx)(ae.a,{item:!0,xs:1,align:"center",children:Object(re.jsx)(le.a,{variant:"body2",children:"Name"})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:6,children:t?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(ue.a,{defaultValue:n,onChange:function(e){s({mode:"playlist",value:e.target.value})}})}),Object(re.jsx)(ae.a,{item:!0,xs:2}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:3,justifyContent:"center",align:"right",children:[Object(re.jsx)(pe.a,{variant:"contained",color:"primary",size:"small",onClick:function(){i({mode:"playlist"}),c({mode:"playlist",value:!1})},children:"Done"}),Object(re.jsx)(pe.a,{size:"small",onClick:function(){c({mode:"playlist",value:!1})},children:"\u2715"})]})]}):Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,xs:7,children:Object(re.jsx)(le.a,{variant:"h6",children:n})}),Object(re.jsx)(ae.a,{item:!0,xs:1,children:Object(re.jsx)(pe.a,{variant:"outlined",size:"small",onClick:function(){c({mode:"playlist",value:!0})},children:"Edit"})})]})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:2,justifyContent:"center",children:Object(re.jsx)(xe,{mode:"playlist"})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:3,justifyContent:"flex-end",spacing:1,children:Object(re.jsx)(ae.a,{item:!0,style:{display:r?null:"none"},children:Object(re.jsx)(pe.a,{variant:"outlined",color:"primary",size:"medium",style:{marginRight:16},onClick:function(){a()},children:"Save"})})})]})}));var Te=Object(r.b)((function(e,t){return{patterns:e.patterns,playlist:e.config.activePlaylist,songs:e.songs,songPattern:e.config.playlistData.songs}}),(function(e){return{playlistAddStep:function(t){e(function(e){return{type:b,payload:e}}(t))},playlistChangeStepOrder:function(t){e(function(e){return{type:m,payload:e}}(t))},playlistCopyStep:function(t){e(function(e){return{type:h,payload:e}}(t))},playlistDeleteStep:function(t){e(function(e){return{type:f,payload:e}}(t))},playlistSetValue:function(t){e(function(e){return{type:O,payload:e}}(t))}}}))((function(e){var t=e.playlist,n=e.songs,a=e.playlistAddStep,c=e.playlistChangeStepOrder,s=e.playlistCopyStep,r=e.playlistDeleteStep,o=e.songPattern,l=e.playlistSetValue,d=Object(i.useState)([]),j=Object(me.a)(d,2),u=j[0],p=j[1],x=[];o.forEach((function(e){-1===x.indexOf(e.id)&&x.push(e.id)})),x=x.sort();var g=de.c(de.d);return Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,children:[Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:10,children:[Object(re.jsx)(Ee,{}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,style:{margin:"24px 0px 18px 0px"},children:Object(re.jsx)(ve,{mode:"playlist"})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,justifyContent:"center",children:Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,sm:12,md:10,justifyContent:"space-around",style:{marginTop:8},children:[Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,style:{fontSize:12,fontWeight:800,textTransform:"uppercase",marginBottom:2,padding:8},children:Object(re.jsxs)(ae.a,{container:!0,item:!0,align:"center",style:{display:0===t.steps.length?"none":null},children:[Object(re.jsx)(ae.a,{item:!0,xs:1,children:"\xa0"}),Object(re.jsx)(ae.a,{item:!0,xs:10,md:5,align:"left",children:"Song Name"}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:3,md:4,lg:6,children:[Object(re.jsx)(ae.a,{item:!0,xs:3,children:"Repeat"}),Object(re.jsx)(ae.a,{item:!0,xs:3,children:"Speed"})]})]})}),0===t.steps.length?Object(re.jsx)(re.Fragment,{}):t.steps.map((function(e,i){var a=n.filter((function(t){return t.id===e.id}))[0];return Object(re.jsx)(ae.a,{item:!0,xs:12,style:{borderRadius:"4px",border:"1px solid #DDD",marginBottom:4,padding:8},children:Object(re.jsxs)(ae.a,{container:!0,align:"center",alignItems:"center",children:[Object(re.jsx)(ae.a,{item:!0,xs:1,align:"left",style:{paddingTop:"4px",paddingLeft:"8px"},onClick:function(){r({idx:i})},children:Object(re.jsxs)("svg",{viewBox:"0 0 18 18",width:"12",height:"12",style:{outline:"0px solid black",cursor:"pointer"},children:[Object(re.jsx)("line",{x1:"17",y1:"1",x2:"1",y2:"17",stroke:"#1f77b4",strokeWidth:"4"}),Object(re.jsx)("line",{x1:"1",y1:"1",x2:"17",y2:"17",stroke:"#1f77b4",strokeWidth:"4"})]})}),Object(re.jsx)(ae.a,{item:!0,xs:10,md:5,align:"left",children:-1===u.indexOf(i)?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("div",{style:{display:"inline-block",position:"relative",marginLeft:-16,top:3,left:-17,width:16,height:16,backgroundColor:g(x.findIndex((function(t){return t===e.id}))),borderRadius:"50%"}}),Object(re.jsx)("span",{children:Object(re.jsx)(le.a,{variant:"body1",style:{display:"inline-block"},children:a.name})})]}):Object(re.jsx)(re.Fragment,{children:Object(re.jsx)("select",{style:{width:"100%"},onChange:function(e){console.log(e.target.value),l({idx:i,type:"song",value:e.target.value})},children:n.map((function(e){var t=a.id===e.id;return console.log(t,a.id,e.id),Object(re.jsx)("option",{value:e.id,selected:t,children:e.name})}))})})}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:3,md:3,lg:3,alignItems:"center",justifyContent:"space-around",children:[Object(re.jsx)(ae.a,{item:!0,xs:6,align:"center",children:-1===u.indexOf(i)?Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)(le.a,{variant:"body2",children:[e.repeat,"x"]})}):Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,justifyContent:"center",alignItems:"center",children:[Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)(ue.a,{size:"small",defaultValue:e.repeat,style:{width:"32px",textAlign:"center"},onChange:function(e){console.log(e.target.value),l({idx:i,type:"repeat",value:e.target.value})}})}),Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)("span",{children:"x"})})]})}),Object(re.jsx)(ae.a,{item:!0,xs:6,children:-1===u.indexOf(i)?Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)(le.a,{variant:"body2",children:[e.speed,"x"]})}):Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,justifyContent:"center",alignItems:"center",spacing:1,children:[Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)("select",{style:{width:40},onChange:function(e){console.log(e.target.value),l({idx:i,type:"speed",value:e.target.value})},children:[.25,.5,1,1.5,2,4,8].map((function(t){return Object(re.jsx)("option",{value:t,selected:Number(e.speed)===t,children:t})}))})}),Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)("span",{children:"x"})})]})})]}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:2,md:3,lg:3,justifyContent:"flex-end",style:{paddingTop:"4px"},spacing:1,children:-1===u.indexOf(i)?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,onClick:function(){c({idx:i,direction:"up"})},style:{cursor:0===i?null:"pointer"},children:Object(re.jsx)("svg",{width:"18",height:"18",style:{opacity:0===i?0:1},children:Object(re.jsx)("polygon",{points:"9 0 18 18 0 18",fill:"#1f77b4"})})}),Object(re.jsx)(ae.a,{item:!0,onClick:function(){c({idx:i,direction:"down"})},style:{cursor:"pointer"},children:Object(re.jsx)("svg",{width:"18",height:"18",style:{opacity:i===t.steps.length-1?0:1},children:Object(re.jsx)("polygon",{transform:"rotate(180 9,9)",points:"9 0 18 18 0 18",fill:"#1f77b4"})})}),Object(re.jsx)(ae.a,{item:!0,align:"right",style:{cursor:"pointer"},onClick:function(){s({idx:i})},children:Object(re.jsxs)("svg",{width:"18",height:"18",children:[Object(re.jsx)("line",{x1:"1",y1:"9",x2:"17",y2:"9",stroke:"#1f77b4",strokeWidth:"4"}),Object(re.jsx)("line",{x1:"9",y1:"1",x2:"9",y2:"17",stroke:"#1f77b4",strokeWidth:"4"})]})}),Object(re.jsx)(ae.a,{item:!0,align:"right",style:{cursor:"pointer"},onClick:function(){var e=u;e.push(i),p(Object.assign([],[],e))},children:Object(re.jsxs)("svg",{width:"18",height:"18",children:[Object(re.jsx)("rect",{x:"2",y:"2",width:"14",height:"14",fill:"none",stroke:"#1f77b4",strokeWidth:"4"}),Object(re.jsx)("line",{x1:"19",y1:"0",x2:"9",y2:"9",stroke:"white",strokeWidth:"7"}),Object(re.jsx)("line",{x1:"16",y1:"2.5",x2:"7",y2:"11",stroke:"#1f77b4",strokeWidth:"4",strokeLinecap:"round"})]})})]}):Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)(pe.a,{size:"small",variant:"contained",color:"primary",onClick:function(){var e=u.filter((function(e){return e!==i}));p(Object.assign([],[],e))},children:"Done"})}),Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)(pe.a,{size:"small",onClick:function(){var e=u.filter((function(e){return e!==i}));p(Object.assign([],[],e))},children:"\u2715"})})]})})]})},"playlistMode_steps_".concat(i,"_").concat(e.id))})),Object(re.jsx)(ae.a,{item:!0,xs:12,align:"center",children:Object(re.jsx)(pe.a,{size:"large",onClick:function(){a()},children:"ADD SONG"})})]})})]}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:2,children:Object(re.jsx)(he,{mode:"playlist"})})]})})),Ce=n(125),_e=n(122),Pe=n.n(_e);function ke(e){switch(e.config.playingMode){case"pattern":return e.config.activePattern.channels.slice(1).map((function(t,n){var i=t.steps.findIndex((function(t){return Number(t.idx)===e.currentStep}));return-1!==i?t.steps[i].value:0}));case"song":return void 0!==e.config.songData.steps[e.currentStep]?e.config.songData.steps[e.currentStep].slice(1):[];case"playlist":return void 0!==e.config.playlistData.steps[e.currentStep]?e.config.playlistData.steps[e.currentStep].slice(1):[];default:return[]}}var we=new Array(16).fill(0),Ae=de.b().domain([0,16]).range([0,1200]);var Re=Object(r.b)((function(e,t){return{currentStep:e.currentStep,lightValues:ke(e)}}),(function(e){return{}}))((function(e){e.currentStep;var t=e.lightValues;return Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,justifyContent:"center",children:Object(re.jsx)(ae.a,{item:!0,xs:12,align:"center",children:Object(re.jsx)("svg",{height:80,width:1200,style:{backgroundColor:"#FFF",border:"0px solid #AAA",borderRadius:"60px"},children:Object(re.jsx)("g",{transform:"translate(0 0)",children:we.map((function(e,n){var i=Ae(n)+Ae(.5),a=1===t[n];return Object(re.jsx)("circle",{cx:i,cy:40,r:33,stroke:"#AAA",fill:a?"#FFBF00":"#CCC"},"tree_".concat(n))}))})})})})}));var Ne={marginBottom:4,padding:"4px 8px",height:38};var De=Object(r.b)((function(e,t){return{bootPlaylistId:e.config.bootBehavior.bootPlaylistId,playlists:e.playlists,startOnBoot:e.config.bootBehavior.startOnBoot}}),(function(e){return{setBootPlaylist:function(t){return e(function(e){return{type:T,payload:e}}(t))},setStartOnBoot:function(t){return e(function(e){return{type:I,payload:e}}(t))}}}))((function(e){var t=e.bootPlaylistId,n=e.playlists,i=e.setBootPlaylist,a=e.setStartOnBoot,c=e.startOnBoot;return Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,alignItems:"flex-start",children:Object(re.jsxs)(ce.a,{elevation:0,style:{width:"100%",padding:24,border:"1px solid #CCC"},children:[Object(re.jsx)(fe,{title:"Boot Behavior"}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,justifyContent:"space-between",alignItems:"center",style:Ne,children:[Object(re.jsx)(ae.a,{item:!0,xs:6,children:Object(re.jsx)(le.a,{variant:"body1",children:"Start On Boot"})}),Object(re.jsx)(ae.a,{item:!0,xs:3,align:"center",children:Object(re.jsx)(pe.a,{size:"small",variant:c?"contained":"outlined",color:c?"primary":"default",style:{width:"100%"},onClick:function(){a(!0)},children:"Yes"})}),Object(re.jsx)(ae.a,{item:!0,xs:3,align:"center",children:Object(re.jsx)(pe.a,{size:"small",variant:c?"outlined":"contained",color:c?"default":"primary",style:{width:"100%"},onClick:function(){a(!1)},children:"No"})})]}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,justifyContent:"space-between",alignItems:"center",style:Ne,children:[Object(re.jsx)(ae.a,{item:!0,xs:5,children:Object(re.jsx)(le.a,{variant:"body1",children:"Boot Playlist"})}),Object(re.jsx)(ae.a,{item:!0,xs:7,align:"center",children:Object(re.jsx)("select",{style:{width:"100%",fontSize:14},onChange:function(e){console.log(e.target.value),i(e.target.value)},children:n.map((function(e,n){return Object(re.jsx)("option",{selected:t===e.id,value:e.id,children:e.name},"boot-behavior-playlist-".concat(n))}))})})]})]})})})),Ie=n(123);var Le=Object(r.b)((function(e,t){return{state:e}}),(function(e){return{}}))((function(e){var t=e.state;return Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,alignItems:"flex-start",children:Object(re.jsxs)(ce.a,{elevation:0,style:{width:"100%",padding:24,border:"1px solid #CCC"},children:[Object(re.jsx)(fe,{title:"Backup & Restore"}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,justifyContent:"space-evenly",children:[Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)(pe.a,{variant:"contained",color:"primary",onClick:function(){window.socket.emit("SAVE_TO_DISK")},children:"Save To Disk"})}),Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)(pe.a,{variant:"outlined",onClick:function(){window.socket.emit("LOAD_FROM_DISK")},children:"Load From Disk"})}),Object(re.jsx)(ae.a,{item:!0,style:{margin:12},children:Object(re.jsx)(pe.a,{variant:"contained",color:"primary",onClick:function(){!function(e){var t={config:{}};t.config.activePatternId=e.config.activePatternId,t.config.activePlaylistId=e.config.activePlaylistId,t.config.activeSongId=e.config.activeSongId,t.config.bootBehavior=e.config.bootBehavior,t.config.networkDevices=e.config.networkDevices,t.patterns=e.patterns,t.playlists=e.playlists,t.songs=e.songs,t.pins=e.pins;var n=new Blob([JSON.stringify(t,null,2)],{type:"text/plain;charset=utf-8"});Object(Ie.saveAs)(n,"configuration.json")}(t)},children:"Download Configuration"})}),Object(re.jsxs)(ae.a,{item:!0,children:[Object(re.jsx)("input",{disabled:!0,accept:"application/JSON",id:"contained-button-file",hidden:!0,type:"file",onChange:function(e){console.log(e.target.files);var t=new FileReader;t.onload=function(e){!function(e){var t=null;try{t=JSON.parse(e)}catch(i){return void console.log(i)}var n=[];[{key:"config.activePatternId",type:"string"},{key:"config.activePlaylistId",type:"string"},{key:"config.activeSongId",type:"string"},{key:"config.bootBehavior",type:"object"},{key:"config.networkDevices",type:"object"},{key:"patterns",type:"object"},{key:"playlists",type:"object"},{key:"songs",type:"object"},{key:"pins",type:"object"}].forEach((function(e){if(e.key.split(".").length>1){var i=e.key.split(".")[0],a=e.key.split(".")[1];typeof t[i][a]===e.type?n.push({key:e.key,validated:!0}):n.push({key:e.key,validated:!1})}else typeof t[e.key]===e.type?n.push({key:e.key,validated:!0}):n.push({key:e.key,validated:!1})})),console.log(n),console.log(t),window.socket.emit("LOAD_CONFIGURATION_FROM_JSON",t)}(e.target.result)},t.readAsText(e.target.files[0])}}),Object(re.jsx)("label",{htmlFor:"contained-button-file",children:Object(re.jsx)(pe.a,{disabled:!0,variant:"outlined",component:"span",children:"Upload Configuration"})})]})]})]})})})),Fe=n(46);function Me(e){return Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,spacing:2,style:{marginBottom:0},alignItems:"center",children:[Object(re.jsx)(ae.a,{item:!0,xs:6,align:"right",children:Object(re.jsx)(le.a,{variant:"body2",style:{fontWeight:700,textTransform:"uppercase"},children:e.name})}),Object(re.jsx)(ae.a,{item:!0,xs:6,align:"left",children:Object(re.jsx)(le.a,{variant:"body1",children:e.value})})]})}var Be=Object(r.b)((function(e,t){return{devices:e.config.networkDevices}}),(function(e){return{setNetworkDevicePortMapping:function(t){e(function(e){return{type:k,payload:e}}(t))},testNetworkDevice:function(t){e(function(e){return{type:H,payload:e}}(t))}}}))((function(e){var t=e.devices,n=e.setNetworkDevicePortMapping,a=e.testNetworkDevice,c=Object(i.useState)({status:!1}),s=Object(me.a)(c,2),r=s[0],o=s[1];return Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,style:{marginTop:24},children:Object(re.jsxs)(ce.a,{elevation:0,style:{width:"100%",padding:24,border:"1px solid #CCC"},children:[Object(re.jsx)(fe,{title:"Network Devices"}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,justifyContent:"space-between",spacing:2,style:{marginTop:16},children:t.map((function(e){return Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsxs)(ce.a,{elevation:0,style:{width:"100%",padding:"24px 0px",border:"1px solid #CCC"},children:[Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,children:[{name:"name",value:e.name},{name:"mac address",value:e.mac.toUpperCase()},{name:"last seen",value:((Date.now()-e.lastSeen)/1e3).toFixed(0)+"s ago"}].map((function(e){return Object(re.jsx)(Me,Object(Fe.a)({},e))}))}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,justify:"center",style:{marginTop:12},children:[Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,align:"center",spacing:2,justify:"center",alignItems:"center",children:[Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(le.a,{variant:"body1",style:{fontWeight:700},children:"PORT"})}),Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(le.a,{variant:"body1",style:{fontWeight:700},children:"CH"})})]}),e.mappings.map((function(t,i){return Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,align:"center",spacing:0,justify:"center",alignItems:"center",style:{marginTop:2},children:[Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(le.a,{variant:"body1",children:i})}),Object(re.jsx)(ae.a,{item:!0,xs:4,children:!1===r.status?Object(re.jsx)(le.a,{variant:"body1",children:t}):Object(re.jsx)(ue.a,{defaultValue:t,onChange:function(t){console.log("idx",i,"value",t.target.value,"mac",e.mac),console.log(e.mappings);var a=JSON.parse(JSON.stringify(e.mappings));a[i]=Number(t.target.value),n({mac:e.mac,mappings:a})},inputProps:{style:{textAlign:"center",height:8}},style:{width:32}})})]})}))]}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,justify:"center",align:"center",style:{marginTop:18},children:!0===r.status?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(pe.a,{variant:"contained",color:"primary",onClick:function(){o(Object.assign({},r,{status:!1}))},children:"DONE"})}),Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(pe.a,{variant:"text",onClick:function(){o(Object.assign({},r,{status:!1}))},children:"\u2715"})})]}):Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(pe.a,{variant:"text",onClick:function(){a({mac:e.mac})},children:"TEST"})}),Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(pe.a,{variant:"outlined",onClick:function(){o(Object.assign({},r,{status:!0}))},children:"EDIT"})})]})})]})})}))})]})})}));Object(r.b)((function(e,t){return{pins:e.pins}}),(function(e){return{}}))((function(e){var t=e.pins;return Object(re.jsx)(ae.a,{container:!0,item:!0,xs:7,children:Object(re.jsxs)(ce.a,{elevation:0,style:{width:"100%",padding:24,border:"1px solid #CCC"},children:[Object(re.jsx)(fe,{title:"Map Channels to Pins"}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:12,children:new Array(16).fill(0).map((function(e,n){return Object(re.jsx)(ae.a,{container:!0,item:!0,xs:4,align:"center",style:{padding:4},children:Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,alignItems:"center",justifyContent:"space-between",style:{outline:"1px solid #DDD",padding:"8px 4px"},children:[Object(re.jsx)(ae.a,{item:!0,xs:4,align:"center",style:{paddingTop:1},children:Object(re.jsxs)(le.a,{variant:"body2",style:{fontWeight:700},children:["CH ",n]})}),Object(re.jsx)(ae.a,{item:!0,xs:3,children:Object(re.jsx)(ue.a,{inputProps:{style:{textAlign:"center"}},defaultValue:t[n]})}),Object(re.jsx)(ae.a,{item:!0,xs:4,children:Object(re.jsx)(pe.a,{size:"small",variant:"contained",style:{width:"100%",maxWidth:"100%"},children:"Test"})})]})},"pinmapping_".concat(n))}))}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,spacing:2,justifyContent:"flex-end",style:{marginTop:10},children:[Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)(pe.a,{size:"large",variant:"contained",color:"primary",children:"Save"})}),Object(re.jsx)(ae.a,{item:!0,children:Object(re.jsx)(pe.a,{size:"large",variant:"outlined",color:"default",children:"Cancel"})})]})]})})}));var Ve=Object(r.b)((function(e,t){return{}}),(function(e){return{}}))((function(e){return Object(se.a)(e),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,justifyContent:"center",children:[Object(re.jsx)(ae.a,{item:!0,xs:12,style:{marginBottom:30,paddingLeft:28},children:Object(re.jsx)(le.a,{variant:"h4",children:"Configuration"})}),Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:11,justifyContent:"flex-start",spacing:2,children:[Object(re.jsx)(ae.a,{container:!0,item:!0,xs:4,children:Object(re.jsx)(Le,{})}),Object(re.jsx)(ae.a,{container:!0,item:!0,xs:4,children:Object(re.jsx)(De,{})}),Object(re.jsx)(Be,{})]})]})})),Ue=n(124);var ze={backgroundColor:"white",borderRadius:0,border:"0.5px solid #DDD",marginBottom:16,padding:"16px 4px 16px 4px"},We=Object(r.b)((function(e,t){return{dataLoaded:e.dataLoaded}}),(function(e){return{initializeData:function(t){return e(function(e){return{type:p,payload:e}}(t))},setConfig:function(t){return e(function(e){return{type:C,payload:e}}(t))},setNetworkDeviceStats:function(t){return e(function(e){return{type:w,payload:e}}(t))},setPatterns:function(t){return e(function(e){return{type:N,payload:e}}(t))},setPlaylists:function(t){return e(function(e){return{type:D,payload:e}}(t))},setSongs:function(t){return e(function(e){return{type:B,payload:e}}(t))},setStep:function(t){return e(function(e){return{type:L,payload:e}}(t))},setStepTime:function(t){return e(function(e){return{type:F,payload:e}}(t))}}}))((function(e){var t=e.dataLoaded,n=e.initializeData,i=e.setPatterns,a=e.setConfig,c=e.setNetworkDeviceStats,s=e.setSongs,r=e.setPlaylists,o=e.setStep,l=e.setStepTime;return void 0===window.socket&&(window.socket=Ue.io.connect(),window.socket.on("connect",(function(){console.log("connect")})),window.socket.onAny((function(e,t){switch(e){case"config":return a({value:t});case"network-device-stats":return c({value:t});case"patterns":return i({value:t});case"playlists":return r({value:t});case"set-step":return o({value:t.value});case"set-step-time":return l({value:t.value});case"songs":return s({value:t});case"state-machine":return n({value:t});default:return{}}})),console.log(window.socket),setInterval((function(){window.socket.emit("heartbeat")}),500)),Object(re.jsx)(ee.a,{theme:Object(Ce.a)({palette:{primary:{main:"#1f77b4"},secondary:{main:Pe.a[500]}},typography:{body1:{fontSize:"14px"},body2:{fontSize:"12px"},h4:{fontWeight:300},h6:{fontWeight:300}},overrides:{MuiButton:{root:{borderRadius:"1px",boxShadow:"none"},label:{fontWeight:"700",position:"relative",top:".5px"}}},props:{MuiButtonBase:{disableRipple:!0},MuiButton:{disableElevation:!0}}}),children:Object(re.jsx)("div",{style:{margin:"auto",marginBottom:256,marginTop:12,width:1280,outline:"0px solid #FFF"},children:t?Object(re.jsx)(ae.a,{container:!0,justifyContent:"center",children:Object(re.jsxs)(ae.a,{container:!0,item:!0,xs:12,children:[Object(re.jsx)(ae.a,{item:!0,xs:12,children:Object(re.jsx)(ce.a,{square:!0,elevation:0,style:ze,children:Object(re.jsx)(Ve,{})})}),Object(re.jsx)(ae.a,{item:!0,xs:12,style:{position:"sticky",top:0,left:0,zIndex:2,marginBottom:2},children:Object(re.jsx)(ce.a,{square:!0,elevation:0,style:ze,children:Object(re.jsx)(Re,{})})}),Object(re.jsx)(ae.a,{item:!0,xs:12,children:Object(re.jsx)(ce.a,{square:!0,elevation:0,style:ze,children:Object(re.jsx)(Oe,{})})}),Object(re.jsx)(ae.a,{item:!0,xs:12,children:Object(re.jsx)(ce.a,{square:!0,elevation:0,style:ze,children:Object(re.jsx)(Se,{})})}),Object(re.jsx)(ae.a,{item:!0,xs:12,children:Object(re.jsx)(ce.a,{square:!0,elevation:0,style:ze,children:Object(re.jsx)(Te,{})})})]})}):null})})}));var Ye=function(){return Object(re.jsx)(r.a,{store:$,children:Object(re.jsx)(We,{})})},Ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,301)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),i(e),a(e),c(e),s(e)}))};s.a.render(Object(re.jsxs)(a.a.StrictMode,{children:[Object(re.jsx)(Ye,{}),","]}),document.getElementById("root")),Ge()}},[[262,1,2]]]);
//# sourceMappingURL=main.5f864e1d.chunk.js.map